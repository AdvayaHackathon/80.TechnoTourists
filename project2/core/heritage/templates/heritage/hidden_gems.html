{% extends 'heritage/base.html' %}
{% block content %}
<div class="container my-4">
    <h2 class="text-center text-success">üéí Hidden Gems Itinerary for YouTubers</h2>
    <p class="text-center">Explore rare and underrated places ideal for storytelling and unique content creation!</p>
    <div class="row row-cols-1 row-cols-md-2 g-4">
        {% for gem in gems %}
        <div class="col">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h5 class="card-title">{{ gem.place_name }}</h5>
                    <h6 class="card-subtitle mb-2 text-muted">{{ gem.district }}, {{ gem.state }}</h6>
                    <p class="card-text"><strong>Why visit?</strong> {{ gem.why_hidden }}</p>
                    <p class="card-text"><strong>Best time:</strong> {{ gem.best_time_to_visit }}</p>
                    <button class="btn btn-outline-primary" onclick="showMap({{ gem.latitude }}, {{ gem.longitude }}, '{{ gem.place_name }}')">View on Map</button>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Map Section -->
    <div id="mapSection" class="mt-5" style="display: none;">
        <h4 class="text-center">üó∫Ô∏è Location</h4>
        <div id="map" style="height: 400px;"></div>
    </div>
</div>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
    let map;

    function showMap(lat, lng, place) {
        document.getElementById('mapSection').style.display = 'block';

        if (!map) {
            map = L.map('map').setView([lat, lng], 10);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© OpenStreetMap contributors'
            }).addTo(map);
        } else {
            map.setView([lat, lng], 10);
        }

        L.marker([lat, lng]).addTo(map)
            .bindPopup(`<b>${place}</b>`).openPopup();
    }
</script>
{% endblock %}



{% comment %} {% extends 'heritage/base.html' %}
{% block content %}
<h2 class="mt-4 text-center text-success">Hidden Gems for YouTubers</h2>

<form method="get" class="row g-3 mb-4">
    <div class="col-md-6">
        <input type="text" name="state" class="form-control" placeholder="Enter State" value="{{ request.GET.state }}">
    </div>
    <div class="col-md-6">
        <input type="text" name="district" class="form-control" placeholder="Enter District (Optional)" value="{{ request.GET.district }}">
    </div>
    <div class="col-12 text-center">
        <button type="submit" class="btn btn-outline-primary">Find Hidden Gems</button>
    </div>
</form>

<div class="row">
    {% for gem in gems %}
    <div class="col-md-6 mb-4">
        <div class="card h-100 shadow-sm">
            <div class="card-body">
                <h4 class="card-title text-primary">{{ gem.name }}</h4>
                <p><strong>State:</strong> {{ gem.state }}</p>
                <p><strong>District:</strong> {{ gem.district }}</p>
                <p><strong>Description:</strong> {{ gem.description }}</p>
                <p><strong>Best Time to Visit:</strong> {{ gem.best_time_to_visit }}</p>
                <p><strong>YouTube Content Idea:</strong> {{ gem.youtube_ideas }}</p>
                <a href="https://www.google.com/maps?q={{ gem.latitude }},{{ gem.longitude }}" target="_blank" class="btn btn-sm btn-success">View on Map</a>
            </div>
        </div>
    </div>
    {% empty %}
    <p class="text-center text-muted">No hidden gems found for this selection.</p>
    {% endfor %}
</div>
{% endblock %} {% endcomment %}
